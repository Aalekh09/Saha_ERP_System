<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Font Status Dashboard - Saha Institute</title>

    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet"
        onerror="this.onerror=null;this.href='libs/fallback-fonts.css';">
    <link rel="stylesheet" href="libs/fallback-fonts.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="libs/universal-font-loader.js"></script>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="header-info">
                <h1>Font Status Dashboard</h1>
                <p>Monitor font loading across all pages</p>
            </div>
        </div>
    </header>

    <div class="main-container">
        <div class="content-panel">
            <div class="panel-header">
                <div class="panel-title">
                    <h2><i class="fas fa-font"></i> Font Loading Status</h2>
                    <p class="subtitle">Real-time font loading monitoring and testing</p>
                </div>
                <div class="panel-actions">
                    <button class="btn-primary" onclick="refreshFontStatus()">
                        <i class="fas fa-sync-alt"></i> Refresh Status
                    </button>
                    <button class="btn-secondary" onclick="testAllPages()">
                        <i class="fas fa-external-link-alt"></i> Test All Pages
                    </button>
                </div>
            </div>
            <div class="panel-content">
                <!-- Font Status Overview -->
                <div class="font-status-overview">
                    <div class="status-card" id="overallStatus">
                        <div class="status-icon">
                            <i class="fas fa-font"></i>
                        </div>
                        <div class="status-info">
                            <h3 id="overallStatusText">Checking...</h3>
                            <p>Overall Font Status</p>
                        </div>
                    </div>
                    <div class="status-card" id="loadingMethod">
                        <div class="status-icon">
                            <i class="fas fa-cog"></i>
                        </div>
                        <div class="status-info">
                            <h3 id="loadingMethodText">Unknown</h3>
                            <p>Loading Method</p>
                        </div>
                    </div>
                    <div class="status-card" id="fallbackStatus">
                        <div class="status-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="status-info">
                            <h3 id="fallbackStatusText">Ready</h3>
                            <p>Fallback System</p>
                        </div>
                    </div>
                </div>

                <!-- Individual Font Status -->
                <div class="individual-fonts">
                    <h3><i class="fas fa-list"></i> Individual Font Status</h3>
                    <div class="fonts-grid">
                        <div class="font-card">
                            <div class="font-header">
                                <h4>System Font (Primary)</h4>
                                <div class="font-status" id="systemStatus">
                                    <i class="fas fa-circle"></i>
                                    <span>Checking...</span>
                                </div>
                            </div>
                            <div class="font-sample">
                                <p style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;">
                                    The quick brown fox jumps over the lazy dog. 1234567890
                                </p>
                                <p style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; font-weight: 600;">
                                    <strong>Bold: System font typography</strong>
                                </p>
                            </div>
                        </div>

                        <div class="font-card">
                            <div class="font-header">
                                <h4>Playfair Display (Serif)</h4>
                                <div class="font-status" id="playfairStatus">
                                    <i class="fas fa-circle"></i>
                                    <span>Checking...</span>
                                </div>
                            </div>
                            <div class="font-sample">
                                <p style="font-family: 'Playfair Display', serif;">
                                    The quick brown fox jumps over the lazy dog. 1234567890
                                </p>
                                <p style="font-family: 'Playfair Display', serif; font-weight: 600;">
                                    <strong>Bold: Certificate and formal documents</strong>
                                </p>
                            </div>
                        </div>

                        <div class="font-card">
                            <div class="font-header">
                                <h4>Crimson Text (Serif)</h4>
                                <div class="font-status" id="crimsonStatus">
                                    <i class="fas fa-circle"></i>
                                    <span>Checking...</span>
                                </div>
                            </div>
                            <div class="font-sample">
                                <p style="font-family: 'Crimson Text', serif;">
                                    The quick brown fox jumps over the lazy dog. 1234567890
                                </p>
                                <p style="font-family: 'Crimson Text', serif; font-weight: 600;">
                                    <strong>Bold: Academic and formal text</strong>
                                </p>
                            </div>
                        </div>

                        <div class="font-card">
                            <div class="font-header">
                                <h4>System Fallback</h4>
                                <div class="font-status online">
                                    <i class="fas fa-circle"></i>
                                    <span>Always Available</span>
                                </div>
                            </div>
                            <div class="font-sample">
                                <p style="font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
                                    The quick brown fox jumps over the lazy dog. 1234567890
                                </p>
                                <p style="font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; font-weight: 600;">
                                    <strong>Bold: System font fallback</strong>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Page Testing -->
                <div class="page-testing">
                    <h3><i class="fas fa-globe"></i> Page Font Testing</h3>
                    <div class="pages-grid">
                        <div class="page-test-card" data-page="index.html">
                            <div class="page-header">
                                <h4>Main Dashboard</h4>
                                <div class="page-status checking">
                                    <i class="fas fa-circle"></i>
                                    <span>Not Tested</span>
                                </div>
                            </div>
                            <div class="page-actions">
                                <button class="btn-outline" onclick="testPage('index.html')">
                                    <i class="fas fa-external-link-alt"></i> Test Page
                                </button>
                            </div>
                        </div>

                        <div class="page-test-card" data-page="dashboard.html">
                            <div class="page-header">
                                <h4>Analytics Dashboard</h4>
                                <div class="page-status checking">
                                    <i class="fas fa-circle"></i>
                                    <span>Not Tested</span>
                                </div>
                            </div>
                            <div class="page-actions">
                                <button class="btn-outline" onclick="testPage('dashboard.html')">
                                    <i class="fas fa-external-link-alt"></i> Test Page
                                </button>
                            </div>
                        </div>

                        <div class="page-test-card" data-page="attendance.html">
                            <div class="page-header">
                                <h4>Attendance Management</h4>
                                <div class="page-status checking">
                                    <i class="fas fa-circle"></i>
                                    <span>Not Tested</span>
                                </div>
                            </div>
                            <div class="page-actions">
                                <button class="btn-outline" onclick="testPage('attendance.html')">
                                    <i class="fas fa-external-link-alt"></i> Test Page
                                </button>
                            </div>
                        </div>

                        <div class="page-test-card" data-page="certificate.html">
                            <div class="page-header">
                                <h4>Certificate Generation</h4>
                                <div class="page-status checking">
                                    <i class="fas fa-circle"></i>
                                    <span>Not Tested</span>
                                </div>
                            </div>
                            <div class="page-actions">
                                <button class="btn-outline" onclick="testPage('certificate.html')">
                                    <i class="fas fa-external-link-alt"></i> Test Page
                                </button>
                            </div>
                        </div>

                        <div class="page-test-card" data-page="pages/reports.html">
                            <div class="page-header">
                                <h4>Reports & Analytics</h4>
                                <div class="page-status checking">
                                    <i class="fas fa-circle"></i>
                                    <span>Not Tested</span>
                                </div>
                            </div>
                            <div class="page-actions">
                                <button class="btn-outline" onclick="testPage('pages/reports.html')">
                                    <i class="fas fa-external-link-alt"></i> Test Page
                                </button>
                            </div>
                        </div>

                        <div class="page-test-card" data-page="notifications.html">
                            <div class="page-header">
                                <h4>Email Notifications</h4>
                                <div class="page-status checking">
                                    <i class="fas fa-circle"></i>
                                    <span>Not Tested</span>
                                </div>
                            </div>
                            <div class="page-actions">
                                <button class="btn-outline" onclick="testPage('notifications.html')">
                                    <i class="fas fa-external-link-alt"></i> Test Page
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Troubleshooting -->
                <div class="troubleshooting">
                    <h3><i class="fas fa-tools"></i> Troubleshooting</h3>
                    <div class="troubleshooting-grid">
                        <div class="troubleshoot-card">
                            <h4>Common Issues</h4>
                            <ul>
                                <li>404 errors for font files</li>
                                <li>Slow font loading</li>
                                <li>Inconsistent typography</li>
                                <li>CORS font loading errors</li>
                            </ul>
                        </div>
                        <div class="troubleshoot-card">
                            <h4>Solutions</h4>
                            <ul>
                                <li>Automatic fallback to system fonts</li>
                                <li>Font loading timeout (3s)</li>
                                <li>Universal font loader script</li>
                                <li>Preconnect to Google Fonts</li>
                            </ul>
                        </div>
                        <div class="troubleshoot-card">
                            <h4>Performance</h4>
                            <ul>
                                <li>Font-display: swap enabled</li>
                                <li>Fallback fonts cached</li>
                                <li>Loading state management</li>
                                <li>Progressive enhancement</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Font status checking
        function checkFontStatus(fontFamily) {
            if (!('fonts' in document)) {
                return 'unknown';
            }
            
            try {
                const isLoaded = document.fonts.check(`16px "${fontFamily}"`);
                return isLoaded ? 'loaded' : 'fallback';
            } catch (error) {
                return 'error';
            }
        }

        function updateFontStatus(elementId, fontFamily) {
            const element = document.getElementById(elementId);
            const status = checkFontStatus(fontFamily);
            
            element.className = `font-status ${status === 'loaded' ? 'online' : 'offline'}`;
            element.innerHTML = `
                <i class="fas fa-circle"></i>
                <span>${status === 'loaded' ? 'Loaded' : 'Fallback'}</span>
            `;
        }

        function refreshFontStatus() {
            // Update individual font statuses
            updateFontStatus('systemStatus', 'System Font');
            updateFontStatus('playfairStatus', 'Playfair Display');
            updateFontStatus('crimsonStatus', 'Crimson Text');
            
            // Update overall status
            const systemLoaded = true; // System fonts are always available
            const playfairLoaded = checkFontStatus('Playfair Display') === 'loaded';
            const crimsonLoaded = checkFontStatus('Crimson Text') === 'loaded';
            
            const loadedCount = [interLoaded, playfairLoaded, crimsonLoaded].filter(Boolean).length;
            
            const overallStatus = document.getElementById('overallStatus');
            const overallStatusText = document.getElementById('overallStatusText');
            
            if (loadedCount === 3) {
                overallStatus.className = 'status-card success';
                overallStatusText.textContent = 'All Fonts Loaded';
            } else if (loadedCount > 0) {
                overallStatus.className = 'status-card warning';
                overallStatusText.textContent = `${loadedCount}/3 Fonts Loaded`;
            } else {
                overallStatus.className = 'status-card error';
                overallStatusText.textContent = 'Using Fallbacks';
            }
            
            // Update loading method
            const loadingMethodText = document.getElementById('loadingMethodText');
            if (window.UniversalFontLoader) {
                if (window.UniversalFontLoader.isLoaded()) {
                    loadingMethodText.textContent = 'Google Fonts';
                } else if (window.UniversalFontLoader.hasFallback()) {
                    loadingMethodText.textContent = 'System Fonts';
                } else {
                    loadingMethodText.textContent = 'Loading...';
                }
            }
        }

        function testPage(pagePath) {
            const pageCard = document.querySelector(`[data-page="${pagePath}"]`);
            const statusElement = pageCard.querySelector('.page-status');
            
            statusElement.className = 'page-status checking';
            statusElement.innerHTML = '<i class="fas fa-circle"></i><span>Testing...</span>';
            
            // Open page in new tab for testing
            const testWindow = window.open(pagePath, '_blank');
            
            // Simulate test completion
            setTimeout(() => {
                statusElement.className = 'page-status online';
                statusElement.innerHTML = '<i class="fas fa-circle"></i><span>Tested</span>';
            }, 2000);
        }

        function testAllPages() {
            const pageCards = document.querySelectorAll('.page-test-card');
            pageCards.forEach(card => {
                const pagePath = card.dataset.page;
                setTimeout(() => testPage(pagePath), Math.random() * 1000);
            });
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(refreshFontStatus, 1000);
            
            // Auto-refresh every 5 seconds
            setInterval(refreshFontStatus, 5000);
        });
    </script>

    <style>
        .font-status-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        .status-card {
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            display: flex;
            align-items: center;
            gap: var(--spacing-lg);
            transition: all 0.3s ease;
        }

        .status-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .status-card.success {
            border-color: var(--success-color);
            background: rgba(16, 185, 129, 0.05);
        }

        .status-card.warning {
            border-color: var(--warning-color);
            background: rgba(245, 158, 11, 0.05);
        }

        .status-card.error {
            border-color: var(--error-color);
            background: rgba(239, 68, 68, 0.05);
        }

        .status-icon {
            width: 60px;
            height: 60px;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
        }

        .status-card.success .status-icon {
            background: linear-gradient(135deg, var(--success-color), #34d399);
        }

        .status-card.warning .status-icon {
            background: linear-gradient(135deg, var(--warning-color), #fbbf24);
        }

        .status-card.error .status-icon {
            background: linear-gradient(135deg, var(--error-color), #f87171);
        }

        .individual-fonts {
            background: var(--surface-color);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            margin-bottom: var(--spacing-xl);
            border: 1px solid var(--border-color);
        }

        .fonts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-lg);
            margin-top: var(--spacing-lg);
        }

        .font-card {
            background: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
        }

        .font-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }

        .font-header h4 {
            margin: 0;
            color: var(--text-primary);
        }

        .font-sample p {
            margin: var(--spacing-sm) 0;
            line-height: 1.5;
        }

        .page-testing {
            background: var(--surface-color);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            margin-bottom: var(--spacing-xl);
            border: 1px solid var(--border-color);
        }

        .pages-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-lg);
            margin-top: var(--spacing-lg);
        }

        .page-test-card {
            background: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }

        .page-status {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius-md);
            font-size: 0.75rem;
            font-weight: 500;
            border: 1px solid var(--border-color);
        }

        .page-status.online {
            color: #10b981;
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }

        .page-status.checking {
            color: var(--text-secondary);
            border-color: var(--border-color);
        }

        .page-status i {
            font-size: 0.5rem;
        }

        .troubleshooting {
            background: var(--surface-color);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            border: 1px solid var(--border-color);
        }

        .troubleshooting-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-lg);
            margin-top: var(--spacing-lg);
        }

        .troubleshoot-card {
            background: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
        }

        .troubleshoot-card h4 {
            margin: 0 0 var(--spacing-md) 0;
            color: var(--text-primary);
        }

        .troubleshoot-card ul {
            margin: 0;
            padding-left: var(--spacing-lg);
        }

        .troubleshoot-card li {
            margin-bottom: var(--spacing-sm);
            color: var(--text-secondary);
            font-size: 0.875rem;
        }
    </style>
</body>
</html>