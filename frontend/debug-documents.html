<!DOCTYPE html>
<html>
<head>
    <title>Debug Documents</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        button { margin: 10px; padding: 10px 20px; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 5px; }
        .result { margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Document Debug Tools</h1>
    
    <button onclick="listDocuments()">List Documents</button>
    <button onclick="cleanupMissing()">Cleanup Missing Documents</button>
    <button onclick="testDocument()">Test Document Serving</button>
    <button onclick="fixDocumentPaths()">Fix Document Paths</button>
    
    <div id="result" class="result"></div>
    
    <script>
        const API_BASE = 'http://localhost:4455';
        
        async function listDocuments() {
            try {
                const response = await fetch(`${API_BASE}/api/students/list-documents`);
                const result = await response.text();
                document.getElementById('result').innerHTML = '<h3>Documents List:</h3><pre>' + result + '</pre>';
            } catch (error) {
                document.getElementById('result').innerHTML = '<h3>Error:</h3><pre>' + error.message + '</pre>';
            }
        }
        
        async function cleanupMissing() {
            try {
                const response = await fetch(`${API_BASE}/api/students/cleanup-missing-documents`, {
                    method: 'POST'
                });
                const result = await response.text();
                document.getElementById('result').innerHTML = '<h3>Cleanup Result:</h3><pre>' + result + '</pre>';
            } catch (error) {
                document.getElementById('result').innerHTML = '<h3>Error:</h3><pre>' + error.message + '</pre>';
            }
        }
        
        async function testDocument() {
            try {
                const response = await fetch(`${API_BASE}/api/students/test-document`);
                const result = await response.text();
                document.getElementById('result').innerHTML = '<h3>Test Document Result:</h3><pre>' + result + '</pre>';
            } catch (error) {
                document.getElementById('result').innerHTML = '<h3>Error:</h3><pre>' + error.message + '</pre>';
            }
        }
        
        async function fixDocumentPaths() {
            try {
                const response = await fetch(`${API_BASE}/api/students/fix-document-paths`, {
                    method: 'POST'
                });
                const result = await response.text();
                document.getElementById('result').innerHTML = '<h3>Fix Paths Result:</h3><pre>' + result + '</pre>';
            } catch (error) {
                document.getElementById('result').innerHTML = '<h3>Error:</h3><pre>' + error.message + '</pre>';
            }
        }
    </script>
</body>
</html>